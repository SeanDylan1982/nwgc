# MongoDB Configuration
# For local development: mongodb://localhost:27017/neighbourhood-watch
# For MongoDB Atlas: mongodb+srv://<username>:<password>@cluster0.example.mongodb.net/neighbourhood-watch?retryWrites=true&w=majority
MONGO_URI=mongodb://localhost:27017/neighbourhood-watch

# Environment Configuration
# Set the environment (development, testing, production, staging)
NODE_ENV=development
# Enable high traffic mode for scaling during peak loads
DB_HIGH_TRAFFIC_MODE=false

# Connection Pool Settings
# Minimum number of connections to keep open
DB_MIN_POOL_SIZE=5
# Maximum number of connections in the pool (adjust based on expected load)
DB_MAX_POOL_SIZE=50
# Maximum time in milliseconds that a connection can remain idle before being closed
DB_MAX_IDLE_TIME_MS=60000
# Maximum number of simultaneous connection attempts
DB_MAX_CONNECTING=10

# Timeout Settings
# Socket timeout in milliseconds (how long to wait for responses)
DB_SOCKET_TIMEOUT_MS=45000
# Connection timeout in milliseconds (how long to wait for initial connection)
DB_CONNECT_TIMEOUT_MS=30000
# How long to wait for server selection before timing out
DB_SERVER_SELECTION_TIMEOUT_MS=30000
# Maximum time in milliseconds for query execution
DB_MAX_TIME_MS=30000

# Keepalive Settings
# Whether to use TCP keepalive (recommended: true)
DB_KEEP_ALIVE=true
# Initial delay before sending keepalive packets (milliseconds)
DB_KEEP_ALIVE_INITIAL_DELAY_MS=300000

# Write Concern Settings
# Write concern level (available: 'majority', '1', etc.)
DB_WRITE_CONCERN=majority
# Write concern timeout in milliseconds
DB_WRITE_TIMEOUT_MS=10000
# Whether to wait for journal commit (true/false)
DB_JOURNAL=true

# Read Preference Settings
# Read preference (available: 'primary', 'primaryPreferred', 'secondary', 'secondaryPreferred', 'nearest')
DB_READ_PREFERENCE=primaryPreferred
# Read concern level (available: 'local', 'available', 'majority', 'linearizable', 'snapshot')
DB_READ_CONCERN_LEVEL=local
# Maximum acceptable latency for secondary reads (milliseconds)
DB_SECONDARY_ACCEPTABLE_LATENCY_MS=15

# SSL/TLS Settings
# Whether to use SSL/TLS for MongoDB connection (required for production)
DB_USE_SSL=false
# Whether to validate SSL certificates (should be true in production)
DB_SSL_VALIDATE=true
# Path to CA certificate file (required for SSL connections)
DB_SSL_CA_PATH=./config/certs/ca.crt
# Path to client certificate file (optional for mutual TLS)
DB_SSL_CERT_PATH=./config/certs/client.crt
# Path to client key file (optional for mutual TLS)
DB_SSL_KEY_PATH=./config/certs/client.key
# Passphrase for the client key file (if encrypted)
DB_SSL_KEY_PASSPHRASE=

# Authentication Settings
# Authentication source database
DB_AUTH_SOURCE=admin
# Authentication mechanism (SCRAM-SHA-1, SCRAM-SHA-256, etc.)
DB_AUTH_MECHANISM=SCRAM-SHA-256

# Retry Settings
# Maximum number of retry attempts for failed operations
DB_MAX_RETRIES=5
# Initial delay before first retry in milliseconds
DB_INITIAL_DELAY_MS=100
# Maximum delay between retries in milliseconds
DB_MAX_DELAY_MS=10000
# Whether to retry read operations (true/false)
DB_RETRY_READS=true
# Whether to retry write operations (true/false)
DB_RETRY_WRITES=true

# Monitoring Settings
# Whether to monitor commands for debugging (true/false)
DB_MONITOR_COMMANDS=false
# Log level (debug, info, warn, error)
DB_LOG_LEVEL=warn

# Performance Settings
# Compression algorithms to use (zlib, snappy, zstd, or null for none)
DB_COMPRESSORS=zlib
# Compression level for zlib (0-9, 0=fastest/no compression, 9=best compression)
DB_ZLIB_COMPRESSION_LEVEL=6

# Connection Stability Settings
# Whether to automatically reconnect (true/false)
DB_AUTO_RECONNECT=true
# Number of reconnection attempts
DB_RECONNECT_TRIES=30
# Interval between reconnection attempts (milliseconds)
DB_RECONNECT_INTERVAL=1000

# Advanced Settings
# Whether to use load balancing (true/false)
DB_LOAD_BALANCED=false
# Whether to automatically create indexes (true/false)
DB_AUTO_INDEX=true
# Replica set name (if using a replica set)
DB_REPLICA_SET=

# Special Settings
# Whether to use in-memory storage engine for testing (true/false)
DB_USE_IN_MEMORY=false

# JWT Configuration
JWT_SECRET=your_super_secret_jwt_key_here

# Server Configuration
PORT=5000
NODE_ENV=development
CLIENT_URL=http://localhost:3000

# Email Configuration (Optional)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=./uploads

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
ADMIN_RATE_LIMIT_MAX=1000

# Health Check Configuration
HEALTH_CHECK_INTERVAL_MS=30000
HEALTH_UNHEALTHY_THRESHOLD=3
HEALTH_ALERT_THRESHOLD=5
HEALTH_LATENCY_THRESHOLD_MS=500
HEALTH_CRITICAL_LATENCY_MS=2000
HEALTH_MAX_ERROR_RATE=0.1
HEALTH_ENABLE_ALERTS=true
ALERT_WEBHOOK_URL=

# Recovery Configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RESET_TIMEOUT=30000
MAX_RECOVERY_ATTEMPTS=3
RECOVERY_BACKOFF_MS=5000
ENABLE_CIRCUIT_BREAKER=true
ENABLE_GRACEFUL_DEGRADATION=true

# Database Metrics Configuration
METRICS_RETENTION_PERIOD_MS=86400000
METRICS_COLLECTION_INTERVAL_MS=60000
DETAILED_METRICS_LIMIT=100
METRICS_AGGREGATION_INTERVAL_MS=300000
ENABLE_METRICS_AGGREGATION=true